{"ast":null,"code":"import API from \"./axios\";\nexport async function login(username, password) {\n  const response = await API.post(\"/token/\", {\n    username,\n    password\n  });\n  localStorage.setItem(\"access\", response.data.access);\n  localStorage.setItem(\"refresh\", response.data.refresh);\n  return response.data;\n}\nexport async function refreshToken() {\n  const refresh = localStorage.getItem(\"refresh\");\n  const response = await API.post(\"/token/refresh/\", {\n    refresh\n  });\n  localStorage.setItem(\"access\", response.data.access);\n  return response.data.access;\n}\nexport async function getUser() {\n  const token = localStorage.getItem(\"access\");\n  const response = await API.get(\"/users/me/\", {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return response.data; // includes role\n}\nexport async function register(userData) {\n  const response = await API.post(\"/users/register/\", userData);\n  if (response.data.token) {\n    localStorage.setItem(\"token\", response.data.token);\n  }\n  return response.data;\n}\nexport function logout() {\n  localStorage.removeItem(\"access\");\n  localStorage.removeItem(\"refresh\");\n  localStorage.removeItem(\"token\");\n}","map":{"version":3,"names":["API","login","username","password","response","post","localStorage","setItem","data","access","refresh","refreshToken","getItem","getUser","token","get","headers","Authorization","register","userData","logout","removeItem"],"sources":["C:/Users/lacbu/Desktop/PROJECT_LMS/lms-project/frontend/src/api/auth.js"],"sourcesContent":["import API from \"./axios\";\r\n\r\nexport async function login(username, password) {\r\n  const response = await API.post(\"/token/\", { username, password });\r\n  localStorage.setItem(\"access\", response.data.access);\r\n  localStorage.setItem(\"refresh\", response.data.refresh);\r\n  return response.data;\r\n}\r\n\r\nexport async function refreshToken() {\r\n  const refresh = localStorage.getItem(\"refresh\");\r\n  const response = await API.post(\"/token/refresh/\", { refresh });\r\n  localStorage.setItem(\"access\", response.data.access);\r\n  return response.data.access;\r\n}\r\n\r\nexport async function getUser() {\r\n  const token = localStorage.getItem(\"access\");\r\n  const response = await API.get(\"/users/me/\", {\r\n    headers: { Authorization: `Bearer ${token}` }\r\n  });\r\n  return response.data; // includes role\r\n}\r\n\r\nexport async function register(userData) {\r\n  const response = await API.post(\"/users/register/\", userData);\r\n  if (response.data.token) {\r\n    localStorage.setItem(\"token\", response.data.token);\r\n  }\r\n  return response.data;\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem(\"access\");\r\n  localStorage.removeItem(\"refresh\");\r\n  localStorage.removeItem(\"token\");\r\n}"],"mappings":"AAAA,OAAOA,GAAG,MAAM,SAAS;AAEzB,OAAO,eAAeC,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EAC9C,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,SAAS,EAAE;IAAEH,QAAQ;IAAEC;EAAS,CAAC,CAAC;EAClEG,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEH,QAAQ,CAACI,IAAI,CAACC,MAAM,CAAC;EACpDH,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEH,QAAQ,CAACI,IAAI,CAACE,OAAO,CAAC;EACtD,OAAON,QAAQ,CAACI,IAAI;AACtB;AAEA,OAAO,eAAeG,YAAYA,CAAA,EAAG;EACnC,MAAMD,OAAO,GAAGJ,YAAY,CAACM,OAAO,CAAC,SAAS,CAAC;EAC/C,MAAMR,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,iBAAiB,EAAE;IAAEK;EAAQ,CAAC,CAAC;EAC/DJ,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEH,QAAQ,CAACI,IAAI,CAACC,MAAM,CAAC;EACpD,OAAOL,QAAQ,CAACI,IAAI,CAACC,MAAM;AAC7B;AAEA,OAAO,eAAeI,OAAOA,CAAA,EAAG;EAC9B,MAAMC,KAAK,GAAGR,YAAY,CAACM,OAAO,CAAC,QAAQ,CAAC;EAC5C,MAAMR,QAAQ,GAAG,MAAMJ,GAAG,CAACe,GAAG,CAAC,YAAY,EAAE;IAC3CC,OAAO,EAAE;MAAEC,aAAa,EAAE,UAAUH,KAAK;IAAG;EAC9C,CAAC,CAAC;EACF,OAAOV,QAAQ,CAACI,IAAI,CAAC,CAAC;AACxB;AAEA,OAAO,eAAeU,QAAQA,CAACC,QAAQ,EAAE;EACvC,MAAMf,QAAQ,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,kBAAkB,EAAEc,QAAQ,CAAC;EAC7D,IAAIf,QAAQ,CAACI,IAAI,CAACM,KAAK,EAAE;IACvBR,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACI,IAAI,CAACM,KAAK,CAAC;EACpD;EACA,OAAOV,QAAQ,CAACI,IAAI;AACtB;AAEA,OAAO,SAASY,MAAMA,CAAA,EAAG;EACvBd,YAAY,CAACe,UAAU,CAAC,QAAQ,CAAC;EACjCf,YAAY,CAACe,UAAU,CAAC,SAAS,CAAC;EAClCf,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;AAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}