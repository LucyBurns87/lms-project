{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lacbu\\\\Desktop\\\\PROJECT_LMS\\\\lms-project\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  allowedRoles\n}) => {\n  _s();\n  const {\n    user,\n    loading,\n    isAuthenticated\n  } = React.useContext(AuthContext);\n\n  // Show loading state with better UX\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: '100vh',\n        flexDirection: 'column',\n        gap: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '4px solid #f3f3f3',\n          borderTop: '4px solid #3498db',\n          borderRadius: '50%',\n          width: '50px',\n          height: '50px',\n          animation: 'spin 1s linear infinite'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#666',\n          fontSize: '1rem'\n        },\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n        children: `\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Not authenticated - redirect to login\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role-based access\n  if (allowedRoles && !allowedRoles.includes(user === null || user === void 0 ? void 0 : user.role)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/unauthorized\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Authenticated and authorized - render children\n  return children;\n};\n_s(ProtectedRoute, \"MU0dGROB41aPqn0/wZRDepvQHk0=\");\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","AuthContext","jsxDEV","_jsxDEV","ProtectedRoute","children","allowedRoles","_s","user","loading","isAuthenticated","useContext","style","display","justifyContent","alignItems","minHeight","flexDirection","gap","border","borderTop","borderRadius","width","height","animation","fileName","_jsxFileName","lineNumber","columnNumber","color","fontSize","to","replace","includes","role","_c","$RefreshReg$"],"sources":["C:/Users/lacbu/Desktop/PROJECT_LMS/lms-project/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles }) => {\r\n  const { user, loading, isAuthenticated } = React.useContext(AuthContext);\r\n\r\n  // Show loading state with better UX\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '100vh',\r\n        flexDirection: 'column',\r\n        gap: '1rem'\r\n      }}>\r\n        <div style={{\r\n          border: '4px solid #f3f3f3',\r\n          borderTop: '4px solid #3498db',\r\n          borderRadius: '50%',\r\n          width: '50px',\r\n          height: '50px',\r\n          animation: 'spin 1s linear infinite'\r\n        }}></div>\r\n        <p style={{ color: '#666', fontSize: '1rem' }}>Loading...</p>\r\n        <style>{`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Not authenticated - redirect to login\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (allowedRoles && !allowedRoles.includes(user?.role)) {\r\n    return <Navigate to=\"/unauthorized\" replace />;\r\n  }\r\n\r\n  // Authenticated and authorized - render children\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,WAAW,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAa,CAAC,KAAK;EAAAC,EAAA;EACrD,MAAM;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EAAgB,CAAC,GAAGX,KAAK,CAACY,UAAU,CAACV,WAAW,CAAC;;EAExE;EACA,IAAIQ,OAAO,EAAE;IACX,oBACEN,OAAA;MAAKS,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,SAAS,EAAE,OAAO;QAClBC,aAAa,EAAE,QAAQ;QACvBC,GAAG,EAAE;MACP,CAAE;MAAAb,QAAA,gBACAF,OAAA;QAAKS,KAAK,EAAE;UACVO,MAAM,EAAE,mBAAmB;UAC3BC,SAAS,EAAE,mBAAmB;UAC9BC,YAAY,EAAE,KAAK;UACnBC,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,MAAM;UACdC,SAAS,EAAE;QACb;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACTzB,OAAA;QAAGS,KAAK,EAAE;UAAEiB,KAAK,EAAE,MAAM;UAAEC,QAAQ,EAAE;QAAO,CAAE;QAAAzB,QAAA,EAAC;MAAU;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAC7DzB,OAAA;QAAAE,QAAA,EAAQ;AAChB;AACA;AACA;AACA;AACA;MAAS;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC;EAEV;;EAEA;EACA,IAAI,CAAClB,eAAe,EAAE;IACpB,oBAAOP,OAAA,CAACH,QAAQ;MAAC+B,EAAE,EAAC,QAAQ;MAACC,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzC;;EAEA;EACA,IAAItB,YAAY,IAAI,CAACA,YAAY,CAAC2B,QAAQ,CAACzB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE0B,IAAI,CAAC,EAAE;IACtD,oBAAO/B,OAAA,CAACH,QAAQ;MAAC+B,EAAE,EAAC,eAAe;MAACC,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAChD;;EAEA;EACA,OAAOvB,QAAQ;AACjB,CAAC;AAACE,EAAA,CA7CIH,cAAc;AAAA+B,EAAA,GAAd/B,cAAc;AA+CpB,eAAeA,cAAc;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}